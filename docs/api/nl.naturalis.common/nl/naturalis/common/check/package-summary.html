<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) on Mon Jun 13 06:40:02 CEST 2022 -->
<title>nl.naturalis.common.check</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2022-06-13">
<meta name="description" content="declaration: module: nl.naturalis.common, package: nl.naturalis.common.check">
<meta name="generator" content="javadoc/PackageWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="package-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../module-summary.html">Module</a></li>
<li class="nav-bar-cell1-rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html#package">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Package:&nbsp;</li>
<li><a href="#package-description">Description</a>&nbsp;|&nbsp;</li>
<li><a href="#related-package-summary">Related Packages</a>&nbsp;|&nbsp;</li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<div class="header">
<div class="sub-title"><span class="module-label-in-package">Module</span>&nbsp;<a href="../../../../module-summary.html">nl.naturalis.common</a></div>
<h1 title="Package nl.naturalis.common.check" class="title">Package nl.naturalis.common.check</h1>
</div>
<hr>
<div class="package-signature">package <span class="element-name">nl.naturalis.common.check</span></div>
<section class="package-description" id="package-description">
<div class="block"><h1>Precondition and Postcondition Verification</h1>

 <p>The classes in this package facilitate the validation of method arguments, variables, object
 state (preconditions) and computational outcomes (postconditions). Contrary to Google Guava's
 <a href="https://guava.dev/releases/21.0/api/docs/com/google/common/base/Preconditions.html">Preconditions</a>
 class and Apache's
 <a href="https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/Validate.html">Validate</a>
 class, validation happens through instance methods rather than class methods. For example:

 <blockquote>
 <pre><code>
 // Verify that the number of chairs is greater than 0, less
 // than or equal to 4, and that it is an even number of chairs:
 this.numChairs = Check.that(numChairs).is(positive()).is(lte(), 4).is(even()).ok();
 </code></pre>
 </blockquote>


 <h2>Performance</h2>

 <p>In spite of the checks being carried out on an actual instance of <a href="IntCheck.html" title="class in nl.naturalis.common.check"><code>IntCheck</code></a> or <a href="ObjectCheck.html" title="class in nl.naturalis.common.check"><code>ObjectCheck</code></a>, benchmarking their performance yield no difference with hand-coded argument checks.
 If the argument passes the test, there is literally no difference outside the error margin of the
 benchmark. If the argument fails the test, and an exception needs to be thrown, the check
 framework also performs equally well, except when you provide your own error message (see below).
 In this case the message needs to be scanned for message arguments, which is relatively
 expensive. Note, though, that in most cases you would not expect your precondition checks to be
 violated often enough to make this is issue. Nevertheless, if you find yourself in this situation
 and performance of the utmost importance, you can achieve it by specifying <i>exactly</i> one
 message argument: <code>'\0'</code> (the NULL character). This will cause the message not to be
 parsed, and simply be passed as-is to the exception. (Of course, the message cannot contain any
 message arguments then.)


 <p>You can view the results of the JMH benchmarks
 <a href="https://github.com/klojang4j/naturalis-common-jmh">here</a>.


 <h2>Common checks</h2>

 <p>All checks come in two variants: one where you can provide a custom error message and one
 where you can't. The latter is mainly meant to be used in combination with the <a href="CommonChecks.html" title="class in nl.naturalis.common.check"><code>CommonChecks</code></a> class. This class is a grab bag of common checks for
 arguments. They are already associated with short, informative error messages, so you don't have
 to invent them yourself.
 <blockquote>
 <pre><code>
 import static nl.naturalis.common.check.CommonChecks.gt;
 ...
 ...
 Check.that(numChairs, "numChairs").is(gt(), 0);
 // Auto-generated error message: "numChairs must be &gt; 0 (was -3)"
 </code></pre>
 </blockquote>

 <h2>Custom error messages</h2>
 <p>If you prefer to send out a custom error message, you can do so by specifying a message
 pattern and zero or more message arguments. The first message argument can be referenced as
 <code>${0}</code>; the second as <code>${1}</code>, etc. For example:
 <blockquote>
 <pre><code>
 // import static nl.naturalis.common.check.CommonChecks.keyIn;
 Check.that(word).is(keyIn(), dictionary, "Spelling error. Did you mean: ${0}?", "colleague");
 // Error message: "Spelling error. Did you mean: colleague?"
 </code></pre>
 </blockquote>
 <p>The following message arguments are automatically available within the message pattern:
 <ol>
   <li><b><code>${test}</code></b> The name of the check that was executed. E.g. "gt" or
   "notNull".
   <li><b><code>${arg}</code></b> The argument being validated.
   <li><b><code>${type}</code></b> The simple class name of the argument.
   <li><b><code>${name}</code></b> The name of the argument, if you provided one through the
   static factory methods of the <code>Check</code> class. Otherwise it will also be the simple
   class name of the argument.
   <li><b><code>${obj}</code></b> The object of the relationship, in case the check took the
   form of a <a href="../function/Relation.html" title="interface in nl.naturalis.common.function"><code>Relation</code></a> or one of its sister
   interfaces. For example, for the <a href="CommonChecks.html#instanceOf()"><code>instanceOf</code></a> check <code>${obj}</code> would be the class that the argument must be an
   instance of. For checks expressed through a <code>Predicate</code> or <code>IntPredicate</code> ${obj}
   will be <code>null</code>.
 </ol>
 <p>For example:
 <blockquote>
 <pre><code>
 Check.that(word).is(keyIn(), dictionary, "Missing key: ${arg}");
 </code></pre>
 </blockquote>

 <h2>Checking argument properties</h2>
 <p>Besides validating arguments, you can also validate argument <i>properties</i>:
 <blockquote>
 <pre><code>
 Check.notNull(name, "name").has(String::length, "length", gte(), 10);
 Check.notNull(employee).has(Employee::getAge, "age", lt(), 50);
 Check.notNull(employees).has(Collection::size, "size", gte(), 100);
 </code></pre>
 </blockquote>
 <p>The <a href="CommonGetters.html" title="class in nl.naturalis.common.check"><code>CommonGetters</code></a> class is a grab bag of common getters
 which, again, are already associated with the name of the getter they expose:
 <blockquote>
 <pre><code>
 import static nl.naturalis.common.check.CommonChecks.gte;
 import static nl.naturalis.common.check.CommonGetters.size;
 // ...
 Check.notNull(employees, "employees").has(size(), gte(), 100);
 // Auto-generated error message: "employees.size() must be &gt;= 100 (was 42)"
 </code></pre>
 </blockquote>
 <p>Note that the words "getter" and "property" are suggestive of what is being validated, but
 also misleading. All that is required is a function that takes the argument and returns the value
 to be validated. That could be a method reference like <code>Person::getFirstName</code>, but it could
 just as well be a function that transforms the argument itself, like the square root of an <code>
 int</code> argument or the uppercase version of a <code>String</code> argument.

 <h2>Changing the Exception type</h2>
 <p>By default, an <code>IllegalArgumentException</code> is thrown if the argument fails to pass a
 test. This can be customized through the static factory methods. For example:
 <blockquote>
 <pre><code>
 this.query = Check.on(SQLException::new, query, "query")
  .notHas(Query::getFrom, "from", negative())
  .has(Query::getLimit, "size", gte(), 10)
  .has(Query::getLimit, "size", lte(), 10000)
  .ok();
 </code></pre>
 </blockquote>
 <p>To save on the number of classes you need to statically import, the <code>CommonChecks</code> class
 additionally contains some common exception factories. For example:
 <blockquote>
 <pre><code>
 import static nl.naturalis.common.check.CommonChecks.*;
 // ...
 Check.on(illegalState(), inputstream).is(open());
 </code></pre>
 </blockquote></div>
</section>
<section class="summary">
<ul class="summary-list">
<li>
<div id="related-package-summary">
<div class="caption"><span>Related Packages</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Package</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><a href="../package-summary.html">nl.naturalis.common</a></div>
<div class="col-last even-row-color">
<div class="block">Contains various static method utility classes for working with strings, arrays, collections,
 etc.</div>
</div>
</div>
</div>
</li>
<li>
<div id="class-summary">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="class-summary-tab0" role="tab" aria-selected="true" aria-controls="class-summary.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary', 2)" class="active-table-tab">All Classes and Interfaces</button><button id="class-summary-tab2" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab2', 2)" class="table-tab">Classes</button><button id="class-summary-tab5" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab5', 2)" class="table-tab">Exceptions</button></div>
<div id="class-summary.tabpanel" role="tabpanel">
<div class="summary-table two-column-summary" aria-labelledby="class-summary-tab0">
<div class="table-header col-first">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="Check.html" title="class in nl.naturalis.common.check">Check</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Facilitates precondition and postcondition checking.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CheckUtils.html" title="class in nl.naturalis.common.check">CheckUtils</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">&nbsp;</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CommonChecks.html" title="class in nl.naturalis.common.check">CommonChecks</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Defines various common tests for arguments.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CommonGetters.html" title="class in nl.naturalis.common.check">CommonGetters</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Defines various functions that retrieve some oft-used property of a well-known class.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="IntCheck.html" title="class in nl.naturalis.common.check">IntCheck</a>&lt;E extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&gt;</div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Facilitates the validation of <code>int</code> values.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab5"><a href="InvalidCheckException.html" title="class in nl.naturalis.common.check">InvalidCheckException</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab5">
<div class="block">Thrown if a check on an argument was not correctly specified.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="ObjectCheck.html" title="class in nl.naturalis.common.check">ObjectCheck</a>&lt;T,<wbr>E extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&gt;</div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Facilitates the validation of arbitrarily typed values.</div>
</div>
</div>
</div>
</div>
</li>
</ul>
</section>
</main>
</div>
</div>
</body>
</html>
